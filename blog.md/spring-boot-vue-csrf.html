<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Spring-Boot + Spring-Security + Vue è·¨åŸŸé—®é¢˜ | Ravenq çš„æŠ€æœ¯åšå®¢</title>
    <meta name="description" content="Ravenq çš„æŠ€æœ¯åšå®¢æ–‡ç« åœ¨Githubçš„å¤‡ä»½ï¼Œåšå®¢è¯·è®¿é—® http://www.aqcoder.com">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <script src="/baidu-tongji.js"></script>
    
    <link rel="preload" href="/assets/css/0.styles.3e1d0bd1.css" as="style"><link rel="preload" href="/assets/js/app.51606a27.js" as="script"><link rel="preload" href="/assets/js/44.d8da8fdf.js" as="script"><link rel="prefetch" href="/assets/js/10.4f2293f7.js"><link rel="prefetch" href="/assets/js/11.d70cbb59.js"><link rel="prefetch" href="/assets/js/12.151050ff.js"><link rel="prefetch" href="/assets/js/13.98e327e5.js"><link rel="prefetch" href="/assets/js/14.52657d5b.js"><link rel="prefetch" href="/assets/js/15.f29c78b3.js"><link rel="prefetch" href="/assets/js/16.9b42233c.js"><link rel="prefetch" href="/assets/js/17.d76eead4.js"><link rel="prefetch" href="/assets/js/18.1b44fce2.js"><link rel="prefetch" href="/assets/js/19.0f22874b.js"><link rel="prefetch" href="/assets/js/2.d8f505d4.js"><link rel="prefetch" href="/assets/js/20.3a8af0fd.js"><link rel="prefetch" href="/assets/js/21.2f43bfd2.js"><link rel="prefetch" href="/assets/js/22.3badefaf.js"><link rel="prefetch" href="/assets/js/23.18fc0677.js"><link rel="prefetch" href="/assets/js/24.e105e5c1.js"><link rel="prefetch" href="/assets/js/25.cc3cb185.js"><link rel="prefetch" href="/assets/js/26.b7c250e7.js"><link rel="prefetch" href="/assets/js/27.8dd3530f.js"><link rel="prefetch" href="/assets/js/28.9d33d417.js"><link rel="prefetch" href="/assets/js/29.8f06f09e.js"><link rel="prefetch" href="/assets/js/3.c6841776.js"><link rel="prefetch" href="/assets/js/30.b023db8f.js"><link rel="prefetch" href="/assets/js/31.a90f5739.js"><link rel="prefetch" href="/assets/js/32.b6228d44.js"><link rel="prefetch" href="/assets/js/33.7e81152c.js"><link rel="prefetch" href="/assets/js/34.73fdaf57.js"><link rel="prefetch" href="/assets/js/35.199987dd.js"><link rel="prefetch" href="/assets/js/36.fc41b221.js"><link rel="prefetch" href="/assets/js/37.2b1488f7.js"><link rel="prefetch" href="/assets/js/38.5eebeb55.js"><link rel="prefetch" href="/assets/js/39.17dc21f4.js"><link rel="prefetch" href="/assets/js/4.598b8edd.js"><link rel="prefetch" href="/assets/js/40.b004f268.js"><link rel="prefetch" href="/assets/js/41.91fe007f.js"><link rel="prefetch" href="/assets/js/42.9601bf73.js"><link rel="prefetch" href="/assets/js/43.6b2b44e7.js"><link rel="prefetch" href="/assets/js/45.77dedbc5.js"><link rel="prefetch" href="/assets/js/46.84f06670.js"><link rel="prefetch" href="/assets/js/47.97b49389.js"><link rel="prefetch" href="/assets/js/48.efe7b71f.js"><link rel="prefetch" href="/assets/js/5.bf80c919.js"><link rel="prefetch" href="/assets/js/6.ae73b9ef.js"><link rel="prefetch" href="/assets/js/7.86c46139.js"><link rel="prefetch" href="/assets/js/8.302c640d.js"><link rel="prefetch" href="/assets/js/9.f519f576.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3e1d0bd1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ravenq çš„æŠ€æœ¯åšå®¢</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="http://www.aqcoder.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/markdown-it-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown-it-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/vue-cli-plugin-component-lib" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-cli-plugin-component-lib
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>GVF Project</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-server
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-admin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.github.com/ravenq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="http://www.aqcoder.com" target="_blank" rel="noopener noreferrer" class="nav-link external">
  åšå®¢
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">å¼€æºé¡¹ç›®</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/markdown-it-vue" target="_blank" rel="noopener noreferrer" class="nav-link external">
  markdown-it-vue
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.github.com/ravenq/vue-cli-plugin-component-lib" target="_blank" rel="noopener noreferrer" class="nav-link external">
  vue-cli-plugin-component-lib
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><h4>GVF Project</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-server" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-server
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-client" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-client
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-subitem"><a href="https://www.github.com/ravenq/gvf-admin" target="_blank" rel="noopener noreferrer" class="nav-link external">
  gvf-admin
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://www.github.com/ravenq" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>Spring-Boot + Spring-Security + Vue è·¨åŸŸé—®é¢˜</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/blog.md/spring-boot-vue-csrf.html#å¿…é¡»è¦äº†è§£çš„æ¦‚å¿µ-csrf-cors" class="sidebar-link">å¿…é¡»è¦äº†è§£çš„æ¦‚å¿µ CSRF &amp; CORS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.md/spring-boot-vue-csrf.html#csrf" class="sidebar-link">CSRF</a></li><li class="sidebar-sub-header"><a href="/blog.md/spring-boot-vue-csrf.html#cors" class="sidebar-link">CORS</a></li></ul></li><li><a href="/blog.md/spring-boot-vue-csrf.html#spring-boot-vue-è§£å†³è·¨åŸŸé—®é¢˜çš„ç®€å•æ–¹æ³•" class="sidebar-link">spring-boot + vue è§£å†³è·¨åŸŸé—®é¢˜çš„ç®€å•æ–¹æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog.md/spring-boot-vue-csrf.html#ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ" class="sidebar-link">ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ</a></li><li class="sidebar-sub-header"><a href="/blog.md/spring-boot-vue-csrf.html#ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ-cors" class="sidebar-link">ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ CORS</a></li></ul></li><li><a href="/blog.md/spring-boot-vue-csrf.html#spring-boot-spring-security-vue" class="sidebar-link">spring boot + spring security + Vue</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/spring-boot-vue-csrf.html#nuxt-proxy-è§£å†³-cookies-ssesion-é—®é¢˜" class="sidebar-link">nuxt proxy è§£å†³ cookies-ssesion é—®é¢˜</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/spring-boot-vue-csrf.html#nginx-ä»£ç†" class="sidebar-link">nginx ä»£ç†</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog.md/spring-boot-vue-csrf.html#æœ€åçš„æ€è€ƒ" class="sidebar-link">æœ€åçš„æ€è€ƒ</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="spring-boot-spring-security-vue-è·¨åŸŸé—®é¢˜"><a href="#spring-boot-spring-security-vue-è·¨åŸŸé—®é¢˜" aria-hidden="true" class="header-anchor">#</a> Spring-Boot + Spring-Security + Vue è·¨åŸŸé—®é¢˜</h1> <blockquote><p>åŸæ–‡ï¼š <a href="http://www.aqcoder.com/post/content?id=40" target="_blank" rel="noopener noreferrer">http://www.aqcoder.com/post/content?id=40<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></blockquote> <p>æœ€è¿‘çš„ä¸€ä¸ªå°é¡¹ç›®ä½¿ç”¨äº† Spring-Boot + Vue çš„å‰åç«¯åˆ†ç¦»å°é¡¹ç›®ï¼Œé¡¹ç›®è™½å°ï¼Œä¹Ÿäº”è„ä¿±å…¨ï¼Œæœ‰è‡ªå·±çš„ç”¨æˆ·ç³»ç»Ÿï¼Œå› æ­¤å°±æœ‰äº†æƒé‰´é—®é¢˜ã€‚</p> <p>Java é¢†åŸŸé‡Œæœ‰ä¸¤ä¸ªæƒé‰´æ¡†æ¶æ¯”è¾ƒå‡ºå Shiro å’Œ Spring Securityã€‚è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨äº† Spring Securityã€‚</p> <h2 id="å¿…é¡»è¦äº†è§£çš„æ¦‚å¿µ-csrf-cors"><a href="#å¿…é¡»è¦äº†è§£çš„æ¦‚å¿µ-csrf-cors" aria-hidden="true" class="header-anchor">#</a> å¿…é¡»è¦äº†è§£çš„æ¦‚å¿µ CSRF &amp; CORS</h2> <p>é¦–å…ˆï¼Œå‰åç«¯åˆ†ç¦»æœ‰ä¸€ä¸ªé¿ä¸å¼€çš„é—®é¢˜ï¼šè·¨åŸŸã€‚è·¨åŸŸé—®é¢˜çš„å‡ºç°æ˜¯å› ä¸ºæµè§ˆå™¨çš„åŒæºç­–ç•¥é€ æˆçš„ï¼Œä»€ä¹ˆæ˜¯åŒæºç­–ç•¥ï¼Œå¯ä»¥çœ‹å®˜æ–¹è¯´æ˜ï¼š <a href="https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/Security/Same-origin_policy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ã€‚ç®€å•çš„è¯´å°±æ˜¯ä¸å…è®¸åœ¨ä½ çš„ç«™å†…è„šæœ¬æ‰§è¡Œå…¶ä»–åŸŸåä¸‹çš„èµ„æºï¼ˆAPIï¼‰ã€‚æµè§ˆå™¨ç¢°åˆ°ä¸ç¬¦åˆåŒæºç­–ç•¥çš„è¯·æ±‚ï¼Œä¾¿æ‹’ç»è®¿é—®ã€‚</p> <h3 id="csrf"><a href="#csrf" aria-hidden="true" class="header-anchor">#</a> CSRF</h3> <p>CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œOne Click Attackâ€æˆ–è€…Session Ridingï¼Œé€šå¸¸ç¼©å†™ä¸ºCSRFæˆ–è€…XSRFï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒè·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰ï¼Œä½†å®ƒä¸XSSéå¸¸ä¸åŒï¼ŒXSSåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æˆå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸XSSæ”»å‡»ç›¸æ¯”ï¼ŒCSRFæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œï¼ˆå› æ­¤å¯¹å…¶è¿›è¡Œé˜²èŒƒçš„èµ„æºä¹Ÿç›¸å½“ç¨€å°‘ï¼‰å’Œéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ¯”XSSæ›´å…·å±é™©æ€§ã€‚</p> <p>æµè§ˆå™¨åŒæºç­–ç•¥å°±æ˜¯ä¸ºäº†é¿å… CSRF æ”»å‡»ã€‚</p> <h3 id="cors"><a href="#cors" aria-hidden="true" class="header-anchor">#</a> CORS</h3> <p>ç”±äºç°å®ä½¿ç”¨ä¸­ï¼Œå¾ˆå¤šéœ€è¦è·¨åŸŸè®¿é—®ï¼Œæ‰€ä»¥ W3C æ ‡å‡†å°±æå‡ºäº† CORSã€‚</p> <p>è·¨åŸŸèµ„æºå…±äº«(CORS) æ˜¯ä¸€ç§æœºåˆ¶ï¼Œå®ƒä½¿ç”¨é¢å¤–çš„ HTTP å¤´æ¥å‘Šè¯‰æµè§ˆå™¨  è®©è¿è¡Œåœ¨ä¸€ä¸ª origin (domain) ä¸Šçš„Webåº”ç”¨è¢«å‡†è®¸è®¿é—®æ¥è‡ªä¸åŒæºæœåŠ¡å™¨ä¸Šçš„æŒ‡å®šçš„èµ„æºã€‚å½“ä¸€ä¸ªèµ„æºä»ä¸è¯¥èµ„æºæœ¬èº«æ‰€åœ¨çš„æœåŠ¡å™¨ä¸åŒçš„åŸŸã€åè®®æˆ–ç«¯å£è¯·æ±‚ä¸€ä¸ªèµ„æºæ—¶ï¼Œèµ„æºä¼šå‘èµ·ä¸€ä¸ªè·¨åŸŸ HTTP è¯·æ±‚ã€‚</p> <p>å…·ä½“æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ï¼š<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener noreferrer">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>ç®€å•é‡Œçš„ç†è§£ï¼Œå°±æ˜¯ CORS æä¾›äº†ä¸€ç§è®¾ç½®ä½ çš„é¡µé¢å¯ä»¥è®¿é—®æŒ‡å®šçš„åŸŸåä¸‹çš„èµ„æºï¼ˆAPIï¼‰çš„æ–¹æ³•ã€‚å½“ç„¶è¿™äº›åŸŸåæ˜¯ä½ å—ä¿¡ä»»çš„ã€‚ä»è€Œé¿å…äº† CRSF æ”»å‡»ã€‚CORS å°±åƒæ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨ã€‚</p> <p><strong>æ³¨æ„ï¼šå¾ˆå¤šå¼€å‘è€…åœ¨ç¢°åˆ°è·¨åŸŸé—®é¢˜ææ—¶ï¼Œé€šè¿‡æœç´¢å¾—åˆ°çš„ç­”æ¡ˆå°±æ˜¯ç›´æ¥è®¾ç½® <code>Oragin: *</code> è¿™æ ·çš„ç»“æœå°±æ˜¯ä½ çš„ç½‘é¡µä¿¡ä»»ä»»ä½•åŸŸåï¼Œè™½ç„¶è¾¾åˆ°äº†è·¨åŸŸè®¿é—®çš„ç›®çš„ï¼Œä½†æ˜¯åŒæ—¶å¤±å»äº† CORS çš„æ„ä¹‰ï¼Œå› ä¸ºä½ è®¾ç½®äº†è¿™ä¸ªè¿‡æ»¤å™¨ä¸è¿‡æ»¤ä»»ä½•åŸŸ</strong></p> <h2 id="spring-boot-vue-è§£å†³è·¨åŸŸé—®é¢˜çš„ç®€å•æ–¹æ³•"><a href="#spring-boot-vue-è§£å†³è·¨åŸŸé—®é¢˜çš„ç®€å•æ–¹æ³•" aria-hidden="true" class="header-anchor">#</a> spring-boot + vue è§£å†³è·¨åŸŸé—®é¢˜çš„ç®€å•æ–¹æ³•</h2> <p>spring-boot + vue æ˜¯ç°åœ¨æ¯”è¾ƒæµè¡Œçš„å‰åç«¯æŠ€æœ¯æ ˆï¼Œåœ¨å‰ç«¯çš„ Vue ä¸­ï¼Œä¸€èˆ¬ä½¿ç”¨ axios è¿›è¡Œåç«¯çš„æ¥å£è®¿é—®ï¼Œç¼–å†™å¥½çš„ Vue å‰ç«¯ä»£ç ä¸€èˆ¬ä¹Ÿæ˜¯éƒ¨ç½²åœ¨ Nginx æœåŠ¡å™¨ä¸­ï¼Œæˆ–è€…ç›´æ¥åœ¨ Node.js ç¯å¢ƒè¿è¡Œäº†ï¼Œè¿™æ ·å‰åç«¯åˆ†ç¦»çš„æƒ…å†µä¸‹å¿…ç„¶ä¼šæœ‰è·¨åŸŸè®¿é—®çš„é—®é¢˜ã€‚</p> <h3 id="ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ"><a href="#ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ" aria-hidden="true" class="header-anchor">#</a> ç¬¬ä¸€ç§è§£å†³æ–¹æ¡ˆ</h3> <p>è¿™ç§æ–¹æ¡ˆæ˜¯ç›´æ¥çš„è§£å†³è·¨åŸŸé—®é¢˜çš„æ–¹æ¡ˆï¼Œå°±æ˜¯å§ Vue ç¼–è¯‘åçš„ä»£ç æ”¾åˆ° Spring-boot çš„ <code>resources/static</code> ç›®å½•ä¸‹ï¼ˆå½“ç„¶ä½ çš„ axios çš„ BaseURL æ”¹æˆ <code>/api</code> ç±»ä¼¼è¿™æ ·ä¸éœ€è¦åŸŸåå‰ç¼€äº†ï¼‰ã€‚ä¹Ÿå°±æ˜¯å‰åç«¯ä½¿ç”¨ä¸€ä¸ªæœåŠ¡ï¼Œè¿™æ ·è‡ªç„¶ä¸ä¼šæœ‰è·¨åŸŸé—®é¢˜äº†ã€‚å®é™…ä¸Šè¿™å·²ç»ä¸ç®—æ˜¯å‰åç«¯åˆ†ç¦»äº†ï¼Œåªæ˜¯å‰åç«¯åˆ†ç¦»å¼€å‘ ğŸ˜„)ã€‚</p> <h3 id="ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ-cors"><a href="#ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ-cors" aria-hidden="true" class="header-anchor">#</a> ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆ CORS</h3> <p>ç¬¬äºŒç§è§£å†³æ–¹æ¡ˆå½“ç„¶æ˜¯ä½¿ç”¨å®˜æ–¹æä¾›çš„æ–¹æ³•ï¼šCORSã€‚Spring ä¸‹æœ‰ä¸¤ç§æ–¹å¼ä½¿ç”¨ CORSï¼š</p> <h4 id="_1-ä½¿ç”¨æ³¨è§£"><a href="#_1-ä½¿ç”¨æ³¨è§£" aria-hidden="true" class="header-anchor">#</a> 1. ä½¿ç”¨æ³¨è§£</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@CrossOrigin</span><span class="token punctuation">(</span>origins <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;null&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">&quot;/helloword&quot;</span><span class="token punctuation">,</span> method <span class="token operator">=</span> <span class="token class-name">RequestMethod</span><span class="token punctuation">.</span><span class="token class-name">Post</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">helloword</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token string">&quot;{\&quot;message\&quot;: \&quot;helloword\&quot;}&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>è¿™ç§æ–¹å¼æ˜¯åœ¨æ¥å£çº§ä¸Šæ§åˆ¶è·¨åŸŸè®¿é—®ï¼Œåœ¨å‰åç«¯åˆ†ç¦»çš„æ¶æ„ä¸‹ï¼Œè¿™ç§æ–¹å¼æ˜¾å¾—ä¸å¤§åˆé€‚ã€‚</p> <h4 id="_2-åœ¨é…ç½®ç±»ä¸­è®¾ç½®-cors"><a href="#_2-åœ¨é…ç½®ç±»ä¸­è®¾ç½®-cors" aria-hidden="true" class="header-anchor">#</a> 2. åœ¨é…ç½®ç±»ä¸­è®¾ç½® CORS</h4> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebMvcConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebMvcConfigurerAdapter</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">addCorsMappings</span><span class="token punctuation">(</span><span class="token class-name">CorsRegistry</span> registry<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    registry<span class="token punctuation">.</span><span class="token function">addMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/**&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowedOrigins</span><span class="token punctuation">(</span><span class="token string">&quot;http://localhost:8080&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowedMethods</span><span class="token punctuation">(</span><span class="token string">&quot;POST&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;PUT&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;OPTIONS&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;DELETE&quot;</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">maxAge</span><span class="token punctuation">(</span><span class="token number">3600</span><span class="token punctuation">)</span>
            <span class="token punctuation">.</span><span class="token function">allowCredentials</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p><code>http://localhost:8080</code> æ˜¯ä½ çš„ Vue é¡¹ç›®çš„æœåŠ¡åœ°å€å’Œç«¯å£å·ï¼Œè¿™æ · Spring boot åç«¯æœåŠ¡å°±å…è®¸ Vue å‰ç«¯è·¨åŸŸåé—®æ‰€æœ‰æ¥å£äº†ã€‚è¿™æ ·éƒ¨ç½²æ˜¯ä¸æ˜¯æ˜¾å¾—æœ‰ç‚¹éº»çƒ¦ï¼Œæœ›å¤§ç¥å‘Šè¯‰æˆ‘æ˜¯å¦‚ä½•è§£å†³éƒ¨ç½²é—®é¢˜çš„ã€‚</p> <h2 id="spring-boot-spring-security-vue"><a href="#spring-boot-spring-security-vue" aria-hidden="true" class="header-anchor">#</a> spring boot + spring security + Vue</h2> <p>ç°åœ¨æˆ‘ä»¬å¼•å…¥äº† spring security æ¡†æ¶ï¼Œæ¥åšæƒé‰´ã€‚å¼•å…¥ pom2:</p> <div class="language-xml extra-class"><pre class="language-xml"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependencies</span><span class="token punctuation">&gt;</span></span>
  ...
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
  ...
 <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependencies</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>å¢åŠ ä¸€ä¸ªç®€å•çš„ Spring security é…ç½®ç±»å‹ <code>WebSecurityConfig.java</code>ï¼š</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Configuration</span>
<span class="token annotation punctuation">@EnableGlobalMethodSecurity</span><span class="token punctuation">(</span>prePostEnabled <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">WebSecurityConfig</span> <span class="token keyword">extends</span> <span class="token class-name">WebSecurityConfigurerAdapter</span> <span class="token punctuation">{</span>
  <span class="token annotation punctuation">@Autowired</span>
  <span class="token class-name">UserService</span> userService<span class="token punctuation">;</span> <span class="token comment">// è¿™é‡Œæ˜¯ä½ çš„ç”¨æˆ·åŠæƒé™è¡¨çš„æ“ä½œ Service</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">AuthenticationManagerBuilder</span> auth<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    <span class="token comment">// è¿™é‡Œåšç”¨æˆ·ç™»å½•åˆ¤æ–­ç”¨æˆ·åå¯†ç </span>
    auth<span class="token punctuation">.</span><span class="token function">userDetailsService</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">UserDetailsService</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token annotation punctuation">@Override</span>
      <span class="token keyword">public</span> <span class="token class-name">UserDetails</span> <span class="token function">loadUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">UsernameNotFoundException</span> <span class="token punctuation">{</span>
        <span class="token class-name">UserEntity</span> user <span class="token operator">=</span> userService<span class="token punctuation">.</span><span class="token function">getUserByName</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä»ä½ çš„æ•°æ®åº“ä¸­å–å‡ºç”¨æˆ·</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>user <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">(</span><span class="token string">&quot;ç”¨æˆ·åä¸å­˜åœ¨&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> user<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">passwordEncoder</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">BCryptPasswordEncoder</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ä½¿ç”¨ BCryptPasswordEncoder åŠ ç›åŠ å¯†</span>
  <span class="token punctuation">}</span>

  <span class="token annotation punctuation">@Override</span>
  <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">configure</span><span class="token punctuation">(</span><span class="token class-name">HttpSecurity</span> http<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
    http<span class="token punctuation">.</span><span class="token function">authorizeRequests</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">requestMatchers</span><span class="token punctuation">(</span><span class="token class-name">CorsUtils</span><span class="token operator">:</span><span class="token operator">:</span><span class="token function">isPreFlightRequest</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// è¿™å¥æ¯”è¾ƒé‡è¦ï¼Œæ”¾è¿‡ option è¯·æ±‚</span>
      <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/css/**&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;/index&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">antMatchers</span><span class="token punctuation">(</span><span class="token string">&quot;/license/**&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">hasRole</span><span class="token punctuation">(</span><span class="token string">&quot;ADMIN&quot;</span><span class="token punctuation">)</span>

      <span class="token comment">// æ— æƒè®¿é—®æ˜¯è¿”å› json æ ¼å¼æ•°æ®ã€‚</span>
      <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">httpBasic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">authenticationEntryPoint</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationEntryPoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">commence</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> httpServletRequest<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> httpServletResponse<span class="token punctuation">,</span>
          <span class="token class-name">AuthenticationException</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
          <span class="token class-name">ResultModel</span> rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;need login&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          rm<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">&quot;401&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          httpServletResponse<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token operator">/</span><span class="token operator">/</span> ç™»å½•å“åº”
      <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">formLogin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">failureHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationFailureHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationFailure</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">,</span>
            <span class="token class-name">AuthenticationException</span> e<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">ResultModel</span> rm <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
          <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">BadCredentialsException</span> <span class="token operator">||</span> e <span class="token keyword">instanceof</span> <span class="token class-name">UsernameNotFoundException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;è´¦æˆ·åæˆ–è€…å¯†ç è¾“å…¥é”™è¯¯!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">LockedException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;è´¦æˆ·è¢«é”å®šï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">CredentialsExpiredException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;å¯†ç è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">AccountExpiredException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;è´¦æˆ·è¿‡æœŸï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>e <span class="token keyword">instanceof</span> <span class="token class-name">DisabledException</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;è´¦æˆ·è¢«ç¦ç”¨ï¼Œè¯·è”ç³»ç®¡ç†å‘˜!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">fail</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»å½•å¤±è´¥!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token punctuation">}</span>
          rm<span class="token punctuation">.</span><span class="token function">setCode</span><span class="token punctuation">(</span><span class="token string">&quot;401&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          resp<span class="token punctuation">.</span><span class="token function">setStatus</span><span class="token punctuation">(</span><span class="token number">401</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">successHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">AuthenticationSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onAuthenticationSuccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">Authentication</span> auth<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">IOException</span> <span class="token punctuation">{</span>
          resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">Object</span> curUser <span class="token operator">=</span> <span class="token class-name">SecurityContextHolder</span><span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAuthentication</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getPrincipal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">ResultModel</span> rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;ç™»å½•æˆåŠŸ!&quot;</span><span class="token punctuation">,</span> curUser<span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">ObjectMapper</span> om <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ObjectMapper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>om<span class="token punctuation">.</span><span class="token function">writeValueAsString</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token operator">/</span><span class="token operator">/</span> é€€å‡ºç™»å½•
      <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">logoutSuccessHandler</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">LogoutSuccessHandler</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">onLogoutSuccess</span><span class="token punctuation">(</span><span class="token class-name">HttpServletRequest</span> req<span class="token punctuation">,</span> <span class="token class-name">HttpServletResponse</span> resp<span class="token punctuation">,</span> <span class="token class-name">Authentication</span> authentication<span class="token punctuation">)</span>
            <span class="token keyword">throws</span> <span class="token class-name">IOException</span><span class="token punctuation">,</span> <span class="token class-name">ServletException</span> <span class="token punctuation">{</span>
          resp<span class="token punctuation">.</span><span class="token function">setContentType</span><span class="token punctuation">(</span><span class="token string">&quot;application/json;charset=utf-8&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">ResultModel</span> rm <span class="token operator">=</span> <span class="token class-name">ResultModel</span><span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token string">&quot;æ³¨é”€æˆåŠŸ!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          <span class="token class-name">PrintWriter</span> out <span class="token operator">=</span> resp<span class="token punctuation">.</span><span class="token function">getWriter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span>JSON<span class="token punctuation">.</span><span class="token function">toJSONString</span><span class="token punctuation">(</span>rm<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
          out<span class="token punctuation">.</span><span class="token function">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">permitAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token operator">/</span><span class="token operator">/</span> è¿™é‡Œè¿˜æ˜¯è¦å…³é—­crsfå› ä¸ºcrsfè¿˜æœ‰tokenä¹‹ç±»çš„å®‰å…¨é˜²æŠ¤
      <span class="token operator">/</span><span class="token operator">/</span> è¿™å°±æ˜¯è¿™ç§æ–¹å¼ä¸å®‰å…¨çš„åŸå› å§
      <span class="token punctuation">.</span><span class="token function">and</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">csrf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">disable</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><p>è¿™æ ·åç«¯ä»£ç å°±è½»æ¾æå®šäº†ã€‚</p> <p>å½“ä½ å¾ˆå¼€å¿ƒçš„å–æ‰“å¼€å‰ç«¯å¼€å§‹ç™»å½•ä»¥åï¼Œä½ ä¼šå‘ç°ï¼Œåªæœ‰ç™»å½•æ¥å£æ˜¯æ­£å¸¸çš„ï¼Œå…¶ä»–æ¥å£éƒ½ä¼šå‘Šè¯‰ä½  <code>need login</code> ä¹Ÿå°±æ˜¯ä½ è¿˜æ˜¯å¤„äºæœªç™»å½•çŠ¶æ€ï¼Œæ˜æ˜ç™»å½•æ¥å£éƒ½è°ƒç”¨æˆåŠŸäº†ï¼Œä¸ºä»€ä¹ˆè¿˜æ˜¯æœªç™»å½•å‘¢ï¼Ÿ</p> <p>è¿™ä¸ªä¼°è®¡æ˜¯å¾ˆå¤šåˆæ¬¡æ¥è§¦ Spring security æœ‰ä½¿ç”¨äº†å‰åç«¯åˆ†ç¦»åŒå­¦çš„ç–‘æƒ‘ã€‚å…¶å®åŸå› å¾ˆç®€å•ï¼ŒSpring security æ˜¯ä½¿ç”¨ cookies-session æœºåˆ¶æ¥éªŒè¯ç”¨æˆ·çŠ¶æ€çš„ï¼Œå‰åç«¯åˆ†ç¦»ä»¥åï¼Œå‰ç«¯æœ‰è‡ªå·±çš„æœåŠ¡ï¼Œåç«¯è®¾ç½® cookies å½“ç„¶æ˜¯å¤±è´¥çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„å‰ç«¯æ— æ³•ä¿å­˜åç«¯è®¾ç½®çš„ cookiesã€‚F12 å¯ä»¥çœ‹åˆ° cookies é‡Œæ²¡æœ‰ <code>JSESSION</code> å­—æ®µã€‚</p> <p>è¿™æ˜¯éš¾é¢˜ï¼Œæ€ä¹ˆåŠå‘¢ï¼Œè¿™æ · Spring security å°±æ²¡åŠæ³•æ•´åˆè¿›æ¥äº†ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹ä¸€ç§å¥‡æ€ªçš„è§£å†³æ–¹æ¡ˆã€‚</p> <h2 id="nuxt-proxy-è§£å†³-cookies-ssesion-é—®é¢˜"><a href="#nuxt-proxy-è§£å†³-cookies-ssesion-é—®é¢˜" aria-hidden="true" class="header-anchor">#</a> nuxt proxy è§£å†³ cookies-ssesion é—®é¢˜</h2> <p>æ—¢ç„¶ Spring security æ— æ³•æ•´åˆçš„åŸå› æ˜¯ cookies-ssesion æ— æ³•ä¿å­˜å¼•èµ·çš„ï¼Œé‚£æˆ‘ä»¬æ˜¯ä¸æ˜¯å¯ä»¥åœ¨å‰ç«¯å’Œåç«¯ä¹‹é—´åŠ ä¸€ä¸ªä»£ç†å‘¢ï¼Œè®©æ‰€æœ‰çš„è¯·æ±‚éƒ½æœ‰ä»£ç†å®Œæˆï¼š</p> <p><img src="https://ravenq-1251588610.cos.ap-guangzhou.myqcloud.com/spring-boot-nuxt-proxy.png" alt="spring-boot-nuxt-proxy"></p> <p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿æˆ‘ä»¬ç›´æ¥ä½¿ç”¨äº† <a href="https://github.com/nuxt-community/proxy-module" target="_blank" rel="noopener noreferrer">@nuxt/proxy<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> @nuxt/proxy æ˜¯ nuxt æ¡†æ¶çš„ä¸€ä¸ªæ¨¡å—ï¼Œä»–ä½¿ç”¨ <a href="https://github.com/chimurai/http-proxy-middleware" target="_blank" rel="noopener noreferrer">http-proxy-middleware<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> ä½œä¸ºåº•å±‚å®ç°ï¼Œæ„å»ºäº†ä¸€ä¸ªä»£ç†æ¨¡å—ã€‚</p> <p>å½“ç„¶æˆ‘ä»¬çš„å‰ç«¯ä¹Ÿå°±ä½¿ç”¨ nuxt æ¡†æ¶äº†ï¼Œè¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨è¿™ä¸ªæ¨¡å—åï¼Œå°±å¿…é¡»åœ¨ nuxt ç¯å¢ƒä¸‹è¿è¡Œäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ çš„å‰ç«¯ä¸èƒ½ä½¿ç”¨ <code>nuxt generate</code> å‘½ä»¤ç¼–è¯‘æˆé™æ€æ–‡ä»¶ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨ <code>spa</code> æ¨¡å¼ç¼–è¯‘å‡º js æ–‡ä»¶ç›´æ¥æ‰”åˆ° nginx é‡Œè¿è¡Œäº†ï¼Œå› ä¸º http-proxy-middleware æ˜¯åœ¨ node ç¯å¢ƒä¸‹è¿è¡Œçš„ã€‚</p> <p>æˆ‘ä»¬åœ¨å‰ç«¯å·¥ç¨‹é‡Œé…ç½® proxy, nuxt.config.js é…ç½®ç‰‡æ®µå¦‚ä¸‹</p> <div class="language-js extra-class"><pre class="language-js"><code>axios<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  proxy<span class="token punctuation">:</span> <span class="token boolean">true</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>

proxy<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'http://192.168.2.144:8080/'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// ä½ çš„åç«¯åœ°å€</span>
</code></pre></div><p>åœ¨å¼€å¯å‰ç«¯ï¼Œå¦‚æœé¡ºåˆ©çš„è¯åº”è¯¥ä¸ä¼šå†æŠ¥é”™äº†ã€‚</p> <h2 id="nginx-ä»£ç†"><a href="#nginx-ä»£ç†" aria-hidden="true" class="header-anchor">#</a> nginx ä»£ç†</h2> <p>æ—¢ç„¶ä½¿ç”¨ä»£ç†èƒ½è§£å†³è·¨åŸŸå’ŒSessionçš„é—®é¢˜ï¼Œè‡ªç„¶ä¸èƒ½å¿˜äº† nginxã€‚å½“ç„¶è¿™æ ·å‰ç«¯å°±å¿…é¡»ä½¿ç”¨ nginx å‘å¸ƒäº†ï¼Œåœ¨ nginx é…ç½®ä½ çš„æ‰€æœ‰åç«¯ api éƒ½èµ°ä»£ç†å°±å¯ä»¥äº†ã€‚è¿™æ ·åœ¨è®¿é—®è€…çœ‹æ¥å‰åç«¯æ˜¯ä¸€ä½“çš„ï¼Œæ‰€ä»¥æ²¡æœ‰è·¨åŸŸå’ŒSessioné—®é¢˜äº†ã€‚è¿™ä¹Ÿæ˜¯ä¸€ç§è§£å†³æ–¹æ¡ˆã€‚</p> <div class="language-nginx.conf extra-class"><pre class="language-text"><code>server {
  listen 80;
  server_name localhost;
  location / {
      root /var/www/your-web-app/ # vue build çš„ dist ç›®å½•é‡Œçš„å†…å®¹
      index index.html;
  }

  location /apis {
  proxy_pass http://192.168.2.1:8080; # åç«¯åœ°å€
}
</code></pre></div><h2 id="æœ€åçš„æ€è€ƒ"><a href="#æœ€åçš„æ€è€ƒ" aria-hidden="true" class="header-anchor">#</a> æœ€åçš„æ€è€ƒ</h2> <p>è¿™æ ·æ˜¯è§£å†³äº†è·¨åŸŸçš„é—®é¢˜å’Œ Spring security session çš„é—®é¢˜ï¼Œæœ‰ç‚¹å¼ºåˆ¶æ•´åˆçš„å‘³é“ã€‚ä½†æ˜¯è¿™æ ·åšçœŸçš„å®‰å…¨ä¹ˆï¼Ÿ</p> <ol><li>crsf è¢«ç¦ç”¨äº†å®‰å…¨ä¹ˆã€‚</li> <li>ä½¿ç”¨ä»£ç†çš„æ–¹å¼ï¼Œä¸ä¼šé€ æˆä¸€äº›å®‰å…¨é—®é¢˜å‘¢ã€‚</li></ol> <p>æ‰€ä»¥ï¼Œæœ€åæˆ‘ä¸ªäººæœ€åçš„ç»“è®ºï¼Œä¸¤ç§æœ€ç»ˆè§£å†³æ–¹æ¡ˆï¼š</p> <ol><li>éƒ¨ç½²çš„æ—¶å€™å§å‰ç«¯ä»£ç æ‰“åŒ…åˆ° spring-boot static ç›®å½•ä¸‹æ•´åˆå‘å¸ƒï¼Œå³ä½¿ä¸æ˜¯å‰åç«¯åˆ†ç¦»äº†ï¼Œå°é¡¹ç›®è¿˜æ˜¯å¯ä»¥æ¥å—çš„ã€‚</li> <li>ä½¿ç”¨ JWTï¼Œåšæ— çŠ¶æ€è¯·æ±‚ã€‚</li></ol> <p><img src="https://ravenq-1251588610.cos.ap-guangzhou.myqcloud.com/ravenq-qr-gray.png" alt="ravenq"></p></div> <div class="page-edit"><!----> <!----></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/app.51606a27.js" defer></script><script src="/assets/js/44.d8da8fdf.js" defer></script>
  </body>
</html>
